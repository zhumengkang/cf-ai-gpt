# ğŸš€ CF AI Chat è¯¦ç»†éƒ¨ç½²æŒ‡å—

## ğŸ“– ç›®å½•
- [é¡¹ç›®ä»‹ç»](#é¡¹ç›®ä»‹ç»)
- [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
- [æ–¹å¼ä¸€ï¼šGitHubè‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰](#æ–¹å¼ä¸€githubè‡ªåŠ¨éƒ¨ç½²æ¨è)
- [æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²](#æ–¹å¼äºŒæ‰‹åŠ¨éƒ¨ç½²)
- [è¯¦ç»†é…ç½®è¯´æ˜](#è¯¦ç»†é…ç½®è¯´æ˜)
- [å¸¸è§é—®é¢˜è§£å†³](#å¸¸è§é—®é¢˜è§£å†³)
- [ä½¿ç”¨æ•™ç¨‹](#ä½¿ç”¨æ•™ç¨‹)

## ğŸ“‹ é¡¹ç›®ä»‹ç»

CF AI Chat æ˜¯ä¸€ä¸ªåŸºäº Cloudflare Workers AI çš„å¤šæ¨¡å‹èŠå¤©åº”ç”¨ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- ğŸ” **å¯†ç ä¿æŠ¤**ï¼šé…ç½®æ–‡ä»¶è®¾ç½®è®¿é—®å¯†ç ï¼Œå®‰å…¨å¯é 
- ğŸ¤– **å¤šæ¨¡å‹æ”¯æŒ**ï¼šæ”¯æŒ6ç§ä¸åŒAIæ¨¡å‹ï¼ˆDeepSeekã€OpenAIã€Llamaã€Qwenã€Gemmaï¼‰
- ğŸ“š **å†å²è®°å½•**ï¼šä½¿ç”¨KVå­˜å‚¨ä¿å­˜èŠå¤©å†å²
- ğŸ’° **è´¹ç”¨é€æ˜**ï¼šæ˜¾ç¤ºæ¯ä¸ªæ¨¡å‹çš„å…·ä½“æ”¶è´¹æ ‡å‡†
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒPCå’Œç§»åŠ¨è®¾å¤‡
- âš¡ **çº¯æ–‡æœ¬å›å¤**ï¼šè¿”å›çº¯æ–‡æœ¬è€ŒéJSONæ ¼å¼

## ğŸ› ï¸ ç¯å¢ƒå‡†å¤‡

### 1. GitHubè´¦æˆ·
- éœ€è¦ä¸€ä¸ªGitHubè´¦æˆ·ç”¨äºæ‰˜ç®¡ä»£ç 
- å¦‚æœæ²¡æœ‰ï¼Œè¯·è®¿é—® [GitHub](https://github.com) æ³¨å†Œ

### 2. Cloudflareè´¦æˆ·
- éœ€è¦Cloudflareè´¦æˆ·ï¼Œå…è´¹å¥—é¤å³å¯
- è®¿é—® [Cloudflare](https://cloudflare.com) æ³¨å†Œ
- ç¡®ä¿å¯ç”¨äº† **Workers AI** åŠŸèƒ½

### 3. åˆ›å»ºKVå‘½åç©ºé—´

#### æ­¥éª¤1ï¼šç™»å½•Cloudflare Dashboard
1. è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com)
2. ä½¿ç”¨æ‚¨çš„è´¦æˆ·ç™»å½•

#### æ­¥éª¤2ï¼šè¿›å…¥Workersæ§åˆ¶å°
1. åœ¨å·¦ä¾§èœå•æ ç‚¹å‡» **Workers & Pages**
2. ç‚¹å‡» **KV** æ ‡ç­¾é¡µ

#### æ­¥éª¤3ï¼šåˆ›å»ºKVå‘½åç©ºé—´
1. ç‚¹å‡» **Create a namespace** æŒ‰é’®
2. è¾“å…¥å‘½åç©ºé—´åç§°ï¼Œä¾‹å¦‚ï¼š`cf-ai-chat-history`
3. ç‚¹å‡» **Add** åˆ›å»º

#### æ­¥éª¤4ï¼šè®°å½•å‘½åç©ºé—´ID
åˆ›å»ºå®Œæˆåï¼Œé¡µé¢ä¼šæ˜¾ç¤ºå‘½åç©ºé—´IDï¼Œç±»ä¼¼ï¼š`$3d9dc952826b434398ed08d8021cc9b0`
**è¯·è®°å½•è¿™ä¸ªIDï¼Œåç»­é…ç½®éœ€è¦ç”¨åˆ°**

## ğŸ”„ æ–¹å¼ä¸€ï¼šGitHubè‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

è¿™ç§æ–¹å¼æœ€ç®€å•ï¼Œåªéœ€è¦é…ç½®ä¸€æ¬¡ï¼Œåç»­ä¿®æ”¹ä»£ç ä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚

### ç¬¬ä¸€æ­¥ï¼šForké¡¹ç›®

1. è®¿é—®æœ¬é¡¹ç›®çš„GitHubé¡µé¢
2. ç‚¹å‡»å³ä¸Šè§’çš„ **Fork** æŒ‰é’®
3. é€‰æ‹©Forkåˆ°æ‚¨çš„ä¸ªäººè´¦æˆ·
4. ç­‰å¾…Forkå®Œæˆ

### ç¬¬äºŒæ­¥ï¼šè·å–Cloudflare APIå¯†é’¥

#### 2.1 è·å–API Token
1. è®¿é—® [Cloudflare API Tokensé¡µé¢](https://dash.cloudflare.com/profile/api-tokens)
2. ç‚¹å‡» **Create Token** æŒ‰é’®
3. é€‰æ‹© **Custom token** æ¨¡æ¿
4. é…ç½®æƒé™ï¼š
   ```
   Permissions:
   - Account: Cloudflare Workers:Edit
   - Zone: Zone Settings:Read
   - Zone: Zone:Read
   
   Account Resources:
   - Include: All accounts
   
   Zone Resources:
   - Include: All zones
   ```
5. ç‚¹å‡» **Continue to summary**
6. ç‚¹å‡» **Create Token**
7. **å¤åˆ¶å¹¶ä¿å­˜Token**ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰

#### 2.2 è·å–Account ID
1. åœ¨Cloudflare Dashboardé¦–é¡µ
2. å³ä¾§æ å¯ä»¥çœ‹åˆ° **Account ID**
3. ç‚¹å‡»å¤åˆ¶æŒ‰é’®ä¿å­˜

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®GitHub Secrets

1. è¿›å…¥æ‚¨Forkçš„ä»“åº“
2. ç‚¹å‡» **Settings** æ ‡ç­¾é¡µ
3. åœ¨å·¦ä¾§èœå•æ‰¾åˆ° **Secrets and variables** > **Actions**
4. ç‚¹å‡» **New repository secret** æ·»åŠ ä»¥ä¸‹ä¸¤ä¸ªå¯†é’¥ï¼š

#### Secret 1: CLOUDFLARE_API_TOKEN
- **Name**: `CLOUDFLARE_API_TOKEN`
- **Secret**: ç²˜è´´æ­¥éª¤2.1ä¸­è·å–çš„API Token

#### Secret 2: CLOUDFLARE_ACCOUNT_ID
- **Name**: `CLOUDFLARE_ACCOUNT_ID`  
- **Secret**: ç²˜è´´æ­¥éª¤2.2ä¸­è·å–çš„Account ID

### ç¬¬å››æ­¥ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶

#### 4.1 ç¼–è¾‘wrangler.toml
1. åœ¨æ‚¨çš„ä»“åº“ä¸­ï¼Œç‚¹å‡» `wrangler.toml` æ–‡ä»¶
2. ç‚¹å‡»é“…ç¬”å›¾æ ‡ï¼ˆç¼–è¾‘ï¼‰
3. ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š

```toml
name = "cf-ai-chat"
main = "src/worker.js"
compatibility_date = "2024-01-10"

[ai]
binding = "AI"

[kv_namespaces]
binding = "CHAT_HISTORY"
id = "$3d9dc952826b434398ed08d8021cc9b0"        # æ›¿æ¢ä¸ºæ‚¨çš„KVå‘½åç©ºé—´ID
preview_id = "$3d9dc952826b434398ed08d8021cc9b0"  # æ›¿æ¢ä¸ºæ‚¨çš„KVå‘½åç©ºé—´ID

[vars]
CHAT_PASSWORD = "your-secure-password-here"       # ä¿®æ”¹ä¸ºæ‚¨çš„è®¿é—®å¯†ç 
MODEL_CONFIG = """
{
  "deepseek-r1": {
    "id": "@cf/deepseek-ai/deepseek-r1-distill-qwen-32b",
    "name": "DeepSeek-R1-Distill-Qwen-32B",
    "description": "åŸºäºQwen2.5çš„è’¸é¦æ¨¡å‹ï¼Œè¶…è¶ŠOpenAI-o1-miniï¼Œé€‚åˆå¤æ‚æ¨ç†",
    "context": 80000,
    "input_price": 0.50,
    "output_price": 4.88,
    "use_messages": true
  },
  "gpt-oss-120b": {
    "id": "@cf/openai/gpt-oss-120b",
    "name": "OpenAI GPT-OSS-120B", 
    "description": "ç”Ÿäº§çº§é€šç”¨æ¨¡å‹ï¼Œé€‚åˆé«˜æ¨ç†éœ€æ±‚ä»»åŠ¡",
    "context": 128000,
    "input_price": 0.35,
    "output_price": 0.75,
    "use_messages": false
  },
  "gpt-oss-20b": {
    "id": "@cf/openai/gpt-oss-20b",
    "name": "OpenAI GPT-OSS-20B",
    "description": "ä½å»¶è¿Ÿæ¨¡å‹ï¼Œé€‚åˆä¸“ç”¨æˆ–æœ¬åœ°åŒ–åº”ç”¨",
    "context": 128000,
    "input_price": 0.20,
    "output_price": 0.30,
    "use_messages": false
  },
  "llama-4-scout": {
    "id": "@cf/meta/llama-4-scout-17b-16e-instruct",
    "name": "Meta Llama 4 Scout",
    "description": "å¤šæ¨¡æ€æ¨¡å‹ï¼Œæ”¯æŒæ–‡æœ¬å’Œå›¾åƒç†è§£",
    "context": 131000,
    "input_price": 0.27,
    "output_price": 0.85,
    "use_messages": true
  },
  "qwen-coder": {
    "id": "@cf/qwen/qwen2.5-coder-32b-instruct",
    "name": "Qwen2.5-Coder-32B",
    "description": "ä»£ç ä¸“ç”¨æ¨¡å‹ï¼Œé€‚åˆä»£ç ç”Ÿæˆå’Œç†è§£",
    "context": 32768,
    "input_price": 0.66,
    "output_price": 1.00,
    "use_messages": true
  },
  "gemma-3": {
    "id": "@cf/google/gemma-3-12b-it",
    "name": "Gemma 3 12B",
    "description": "å¤šè¯­è¨€å¤šæ¨¡æ€æ¨¡å‹ï¼Œæ”¯æŒ140+ç§è¯­è¨€",
    "context": 80000,
    "input_price": 0.35,
    "output_price": 0.56,
    "use_messages": true
  }
}
"""
```

**é‡è¦è¯´æ˜ï¼š**
- å°† `id` å’Œ `preview_id` æ›¿æ¢ä¸ºæ‚¨åœ¨å‡†å¤‡å·¥ä½œä¸­åˆ›å»ºçš„KVå‘½åç©ºé—´ID
- å°† `CHAT_PASSWORD` ä¿®æ”¹ä¸ºæ‚¨æƒ³è¦çš„è®¿é—®å¯†ç ï¼ˆå»ºè®®ä½¿ç”¨å¤æ‚å¯†ç ï¼‰

4. æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼Œå¡«å†™æäº¤ä¿¡æ¯ï¼š
   - **Commit message**: `æ›´æ–°é…ç½®æ–‡ä»¶`
5. ç‚¹å‡» **Commit changes**

### ç¬¬äº”æ­¥ï¼šå¯ç”¨GitHub Pages

1. åœ¨æ‚¨çš„ä»“åº“ä¸­ï¼Œç‚¹å‡» **Settings** æ ‡ç­¾é¡µ
2. åœ¨å·¦ä¾§èœå•æ‰¾åˆ° **Pages**
3. åœ¨ **Source** ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© **GitHub Actions**
4. ä¿å­˜è®¾ç½®

### ç¬¬å…­æ­¥ï¼šè§¦å‘éƒ¨ç½²

1. åœ¨ä»“åº“ä¸»é¡µï¼Œç‚¹å‡» **Actions** æ ‡ç­¾é¡µ
2. æ‚¨åº”è¯¥çœ‹åˆ°ä¸€ä¸ªå·¥ä½œæµæ­£åœ¨è¿è¡Œæˆ–ç­‰å¾…è¿è¡Œ
3. å¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥æ‰‹åŠ¨è§¦å‘ï¼š
   - ä¿®æ”¹ä»»ä½•æ–‡ä»¶ï¼ˆæ¯”å¦‚README.mdæ·»åŠ ä¸€ä¸ªç©ºæ ¼ï¼‰
   - æäº¤æ›´æ”¹

### ç¬¬ä¸ƒæ­¥ï¼šè·å–è®¿é—®åœ°å€

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å°†è·å¾—ä¸¤ä¸ªåœ°å€ï¼š

#### å‰ç«¯é¡µé¢åœ°å€ï¼š
`https://yourusername.github.io/cf-gpt-oss`
ï¼ˆå°†yourusernameæ›¿æ¢ä¸ºæ‚¨çš„GitHubç”¨æˆ·åï¼‰

#### APIç«¯ç‚¹åœ°å€ï¼š
1. è¿›å…¥Cloudflare Dashboard
2. æ‰¾åˆ°æ–°åˆ›å»ºçš„Workerï¼ˆåä¸ºcf-ai-chatï¼‰
3. å¤åˆ¶Workerçš„åŸŸåï¼Œç±»ä¼¼ï¼š`https://cf-ai-chat.youraccount.workers.dev`

## ğŸ”§ æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

å¦‚æœæ‚¨ä¸æƒ³ä½¿ç”¨GitHubè‡ªåŠ¨éƒ¨ç½²ï¼Œå¯ä»¥é€‰æ‹©æ‰‹åŠ¨éƒ¨ç½²ã€‚

### ç¬¬ä¸€æ­¥ï¼šéƒ¨ç½²Worker

#### 1.1 è¿›å…¥Cloudflare Dashboard
1. è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com)
2. ç‚¹å‡» **Workers & Pages**

#### 1.2 åˆ›å»ºWorker
1. ç‚¹å‡» **Create application**
2. é€‰æ‹© **Create Worker**
3. è¾“å…¥Workeråç§°ï¼š`cf-ai-chat`
4. ç‚¹å‡» **Deploy**

#### 1.3 ä¸Šä¼ ä»£ç 
1. åœ¨Workerç¼–è¾‘é¡µé¢ï¼Œåˆ é™¤é»˜è®¤ä»£ç 
2. å¤åˆ¶ `src/worker.js` æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹
3. ç²˜è´´åˆ°ç¼–è¾‘å™¨ä¸­
4. ç‚¹å‡» **Save and Deploy**

### ç¬¬äºŒæ­¥ï¼šé…ç½®Workerç¯å¢ƒ

#### 2.1 é…ç½®KVç»‘å®š
1. åœ¨Workerè¯¦æƒ…é¡µé¢ï¼Œç‚¹å‡» **Settings** æ ‡ç­¾é¡µ
2. æ‰¾åˆ° **Variables** éƒ¨åˆ†
3. åœ¨ **KV Namespace Bindings** ç‚¹å‡» **Add binding**
4. å¡«å†™ï¼š
   - **Variable name**: `CHAT_HISTORY`
   - **KV namespace**: é€‰æ‹©æ‚¨åˆ›å»ºçš„KVå‘½åç©ºé—´
5. ç‚¹å‡» **Save**

#### 2.2 é…ç½®AIç»‘å®š
1. åœ¨ **AI Bindings** éƒ¨åˆ†ç‚¹å‡» **Add binding**
2. å¡«å†™ï¼š
   - **Variable name**: `AI`
3. ç‚¹å‡» **Save**

#### 2.3 é…ç½®ç¯å¢ƒå˜é‡
1. åœ¨ **Environment Variables** éƒ¨åˆ†ç‚¹å‡» **Add variable**

**å˜é‡1ï¼šCHAT_PASSWORD**
- **Variable name**: `CHAT_PASSWORD`
- **Value**: `your-secure-password`ï¼ˆæ‚¨çš„è®¿é—®å¯†ç ï¼‰

**å˜é‡2ï¼šMODEL_CONFIG**
- **Variable name**: `MODEL_CONFIG`
- **Value**: 
```json
{
  "deepseek-r1": {
    "id": "@cf/deepseek-ai/deepseek-r1-distill-qwen-32b",
    "name": "DeepSeek-R1-Distill-Qwen-32B",
    "description": "åŸºäºQwen2.5çš„è’¸é¦æ¨¡å‹ï¼Œè¶…è¶ŠOpenAI-o1-miniï¼Œé€‚åˆå¤æ‚æ¨ç†",
    "context": 80000,
    "input_price": 0.50,
    "output_price": 4.88,
    "use_messages": true
  },
  "gpt-oss-120b": {
    "id": "@cf/openai/gpt-oss-120b",
    "name": "OpenAI GPT-OSS-120B", 
    "description": "ç”Ÿäº§çº§é€šç”¨æ¨¡å‹ï¼Œé€‚åˆé«˜æ¨ç†éœ€æ±‚ä»»åŠ¡",
    "context": 128000,
    "input_price": 0.35,
    "output_price": 0.75,
    "use_messages": false
  },
  "gpt-oss-20b": {
    "id": "@cf/openai/gpt-oss-20b",
    "name": "OpenAI GPT-OSS-20B",
    "description": "ä½å»¶è¿Ÿæ¨¡å‹ï¼Œé€‚åˆä¸“ç”¨æˆ–æœ¬åœ°åŒ–åº”ç”¨",
    "context": 128000,
    "input_price": 0.20,
    "output_price": 0.30,
    "use_messages": false
  },
  "llama-4-scout": {
    "id": "@cf/meta/llama-4-scout-17b-16e-instruct",
    "name": "Meta Llama 4 Scout",
    "description": "å¤šæ¨¡æ€æ¨¡å‹ï¼Œæ”¯æŒæ–‡æœ¬å’Œå›¾åƒç†è§£",
    "context": 131000,
    "input_price": 0.27,
    "output_price": 0.85,
    "use_messages": true
  },
  "qwen-coder": {
    "id": "@cf/qwen/qwen2.5-coder-32b-instruct",
    "name": "Qwen2.5-Coder-32B",
    "description": "ä»£ç ä¸“ç”¨æ¨¡å‹ï¼Œé€‚åˆä»£ç ç”Ÿæˆå’Œç†è§£",
    "context": 32768,
    "input_price": 0.66,
    "output_price": 1.00,
    "use_messages": true
  },
  "gemma-3": {
    "id": "@cf/google/gemma-3-12b-it",
    "name": "Gemma 3 12B",
    "description": "å¤šè¯­è¨€å¤šæ¨¡æ€æ¨¡å‹ï¼Œæ”¯æŒ140+ç§è¯­è¨€",
    "context": 80000,
    "input_price": 0.35,
    "output_price": 0.56,
    "use_messages": true
  }
}
```

2. ç‚¹å‡» **Save and deploy**

### ç¬¬ä¸‰æ­¥ï¼šéƒ¨ç½²å‰ç«¯é¡µé¢

#### é€‰é¡¹1ï¼šGitHub Pages
1. åˆ›å»ºä¸€ä¸ªæ–°çš„GitHubä»“åº“
2. ä¸Šä¼  `index.html` æ–‡ä»¶
3. åœ¨ä»“åº“Settingsä¸­å¯ç”¨GitHub Pages
4. é€‰æ‹©sourceä¸ºmainåˆ†æ”¯

#### é€‰é¡¹2ï¼šCloudflare Pages
1. åœ¨Cloudflare Dashboardä¸­é€‰æ‹© **Pages**
2. ç‚¹å‡» **Create a project**
3. é€‰æ‹© **Upload assets**
4. ä¸Šä¼  `index.html` æ–‡ä»¶
5. è®¾ç½®é¡¹ç›®åç§°å¹¶éƒ¨ç½²

#### é€‰é¡¹3ï¼šå…¶ä»–é™æ€æ‰˜ç®¡æœåŠ¡
- Netlify
- Vercel
- æˆ–ä»»ä½•æ”¯æŒé™æ€æ–‡ä»¶çš„æœåŠ¡

## âš™ï¸ è¯¦ç»†é…ç½®è¯´æ˜

### å¯†ç é…ç½®
```toml
CHAT_PASSWORD = "your-secure-password"
```
- è¿™æ˜¯è®¿é—®èŠå¤©åº”ç”¨çš„å¯†ç 
- å»ºè®®ä½¿ç”¨åŒ…å«å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦çš„å¤æ‚å¯†ç 
- å¯†ç é•¿åº¦å»ºè®®8ä½ä»¥ä¸Š

### æ¨¡å‹é…ç½®è¯¦è§£

æ¯ä¸ªæ¨¡å‹é…ç½®åŒ…å«ä»¥ä¸‹å­—æ®µï¼š

```json
{
  "model-key": {
    "id": "CFæ¨¡å‹æ ‡è¯†ç¬¦",
    "name": "æ˜¾ç¤ºåç§°", 
    "description": "æ¨¡å‹æè¿°",
    "context": ä¸Šä¸‹æ–‡çª—å£å¤§å°,
    "input_price": è¾“å…¥ä»·æ ¼æ¯ç™¾ä¸‡tokens,
    "output_price": è¾“å‡ºä»·æ ¼æ¯ç™¾ä¸‡tokens,
    "use_messages": æ˜¯å¦ä½¿ç”¨messageså‚æ•°
  }
}
```

**å­—æ®µè¯´æ˜ï¼š**
- `id`: Cloudflareçš„æ¨¡å‹æ ‡è¯†ç¬¦ï¼Œä¸å¯ä¿®æ”¹
- `name`: åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºçš„æ¨¡å‹åç§°ï¼Œå¯è‡ªå®šä¹‰
- `description`: æ¨¡å‹çš„ç”¨é€”è¯´æ˜ï¼Œå¯è‡ªå®šä¹‰
- `context`: æ¨¡å‹æ”¯æŒçš„æœ€å¤§ä¸Šä¸‹æ–‡tokenæ•°
- `input_price`: è¾“å…¥tokençš„ä»·æ ¼ï¼ˆç¾å…ƒ/ç™¾ä¸‡tokensï¼‰
- `output_price`: è¾“å‡ºtokençš„ä»·æ ¼ï¼ˆç¾å…ƒ/ç™¾ä¸‡tokensï¼‰
- `use_messages`: 
  - `true`: ä½¿ç”¨OpenAIé£æ ¼çš„messageså‚æ•°
  - `false`: ä½¿ç”¨instructions+inputå‚æ•°

### KVå‘½åç©ºé—´é…ç½®
```toml
[kv_namespaces]
binding = "CHAT_HISTORY"
id = "your-kv-namespace-id"
preview_id = "your-kv-namespace-id"
```
- `binding`: åœ¨ä»£ç ä¸­å¼•ç”¨KVçš„å˜é‡å
- `id`: ç”Ÿäº§ç¯å¢ƒçš„KVå‘½åç©ºé—´ID
- `preview_id`: é¢„è§ˆç¯å¢ƒçš„KVå‘½åç©ºé—´IDï¼ˆå¯ä¸idç›¸åŒï¼‰

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šGitHub Actionséƒ¨ç½²å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š`Authentication error`
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥CLOUDFLARE_API_TOKENæ˜¯å¦æ­£ç¡®è®¾ç½®
2. ç¡®è®¤API Tokenæƒé™æ˜¯å¦åŒ…å«Workersç¼–è¾‘æƒé™
3. æ£€æŸ¥CLOUDFLARE_ACCOUNT_IDæ˜¯å¦æ­£ç¡®

**é”™è¯¯ä¿¡æ¯**ï¼š`KV namespace not found`
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤KVå‘½åç©ºé—´IDæ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥KVå‘½åç©ºé—´æ˜¯å¦å·²åˆ›å»º
3. ç¡®è®¤Account IDæ˜¯å¦åŒ¹é…

### é—®é¢˜2ï¼šå‰ç«¯æ— æ³•è¿æ¥API

**ç—‡çŠ¶**ï¼šé¡µé¢æ˜¾ç¤ºç½‘ç»œé”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥Workeræ˜¯å¦æˆåŠŸéƒ¨ç½²
2. ç¡®è®¤WorkeråŸŸååœ°å€æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥Workerçš„CORSè®¾ç½®
4. å°è¯•ç›´æ¥è®¿é—®Workeråœ°å€æµ‹è¯•

### é—®é¢˜3ï¼šå¯†ç éªŒè¯å¤±è´¥

**ç—‡çŠ¶**ï¼šè¾“å…¥å¯†ç åæç¤ºé”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥Workerç¯å¢ƒå˜é‡ä¸­çš„CHAT_PASSWORDè®¾ç½®
2. ç¡®è®¤å¯†ç è¾“å…¥æ— è¯¯ï¼ˆæ³¨æ„å¤§å°å†™ï¼‰
3. æ£€æŸ¥MODEL_CONFIGç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®

### é—®é¢˜4ï¼šæ¨¡å‹è°ƒç”¨å¤±è´¥

**ç—‡çŠ¶**ï¼šå‘é€æ¶ˆæ¯åè¿”å›é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤Cloudflareè´¦æˆ·å·²å¯ç”¨Workers AI
2. æ£€æŸ¥æ¨¡å‹IDæ˜¯å¦æ­£ç¡®
3. ç¡®è®¤Accountä½™é¢å……è¶³
4. æ£€æŸ¥æ¨¡å‹é…ç½®ä¸­çš„use_messagesè®¾ç½®

### é—®é¢˜5ï¼šå†å²è®°å½•æ— æ³•ä¿å­˜

**ç—‡çŠ¶**ï¼šåˆ·æ–°é¡µé¢åå†å²è®°å½•ä¸¢å¤±
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥KVå‘½åç©ºé—´ç»‘å®šæ˜¯å¦æ­£ç¡®
2. ç¡®è®¤CHAT_HISTORYç»‘å®šåç§°æ­£ç¡®
3. æ£€æŸ¥KVå‘½åç©ºé—´æƒé™è®¾ç½®

## ğŸ“š ä½¿ç”¨æ•™ç¨‹

### ç¬¬ä¸€æ¬¡ä½¿ç”¨

1. **è®¿é—®åº”ç”¨**
   - æ‰“å¼€å‰ç«¯é¡µé¢åœ°å€
   - å¦‚æœçœ‹åˆ°APIé…ç½®é¡µé¢ï¼Œè¾“å…¥WorkeråŸŸå

2. **é…ç½®APIç«¯ç‚¹**
   - è¾“å…¥æ‚¨çš„WorkeråŸŸå
   - æ ¼å¼ï¼š`https://cf-ai-chat.youraccount.workers.dev`
   - ç‚¹å‡»"ç¡®è®¤è®¾ç½®"

3. **èº«ä»½éªŒè¯**
   - è¾“å…¥æ‚¨åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„å¯†ç 
   - ç‚¹å‡»"éªŒè¯"æŒ‰é’®

4. **é€‰æ‹©æ¨¡å‹**
   - ä»ä¸‹æ‹‰èœå•é€‰æ‹©AIæ¨¡å‹
   - æŸ¥çœ‹æ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯ï¼ˆä»·æ ¼ã€ä¸Šä¸‹æ–‡é™åˆ¶ç­‰ï¼‰

5. **å¼€å§‹èŠå¤©**
   - åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥é—®é¢˜
   - æŒ‰Enteræˆ–ç‚¹å‡»å‘é€æŒ‰é’®
   - ç­‰å¾…AIå›å¤

### åŠŸèƒ½ä½¿ç”¨

#### æŸ¥çœ‹å†å²è®°å½•
- ç‚¹å‡»"åŠ è½½å†å²è®°å½•"æŒ‰é’®
- ç³»ç»Ÿä¼šæ˜¾ç¤ºä¹‹å‰çš„å¯¹è¯

#### æ¸…ç©ºå†å²è®°å½•
- ç‚¹å‡»"æ¸…ç©ºå†å²"æŒ‰é’®
- ç¡®è®¤åä¼šåˆ é™¤æ‰€æœ‰èŠå¤©è®°å½•

#### åˆ‡æ¢æ¨¡å‹
- éšæ—¶å¯ä»¥ä»ä¸‹æ‹‰èœå•åˆ‡æ¢ä¸åŒçš„AIæ¨¡å‹
- æ¯ä¸ªæ¨¡å‹æœ‰ä¸åŒçš„ç‰¹ç‚¹å’Œæ”¶è´¹æ ‡å‡†

#### æŸ¥çœ‹tokenä½¿ç”¨æƒ…å†µ
- æ¯æ¡AIå›å¤ä¸‹æ–¹ä¼šæ˜¾ç¤ºä½¿ç”¨çš„tokenæ•°é‡
- å¸®åŠ©æ‚¨äº†è§£ä½¿ç”¨æˆæœ¬

### æˆæœ¬æ§åˆ¶å»ºè®®

1. **é€‰æ‹©åˆé€‚çš„æ¨¡å‹**
   - æ—¥å¸¸èŠå¤©ï¼šä½¿ç”¨gpt-oss-20bï¼ˆä»·æ ¼æœ€ä½ï¼‰
   - å¤æ‚æ¨ç†ï¼šä½¿ç”¨deepseek-r1
   - ä»£ç ç›¸å…³ï¼šä½¿ç”¨qwen-coder

2. **æ§åˆ¶ä¸Šä¸‹æ–‡é•¿åº¦**
   - ç³»ç»Ÿä¼šè‡ªåŠ¨é™åˆ¶å†å²è®°å½•é•¿åº¦
   - é¿å…è¶…é•¿å¯¹è¯å¯¼è‡´æˆæœ¬å¢åŠ 

3. **ç›‘æ§ä½¿ç”¨é‡**
   - å®šæœŸæ£€æŸ¥Cloudflareè´¦æˆ·ä½™é¢
   - å…³æ³¨tokenä½¿ç”¨ç»Ÿè®¡

## ğŸ‰ éƒ¨ç½²å®Œæˆ

æ­å–œï¼æ‚¨å·²ç»æˆåŠŸéƒ¨ç½²äº†CF AI Chatåº”ç”¨ã€‚

**æ‚¨ç°åœ¨æ‹¥æœ‰ï¼š**
- âœ… å¤šæ¨¡å‹AIèŠå¤©åŠŸèƒ½
- âœ… å¯†ç ä¿æŠ¤çš„å®‰å…¨è®¿é—®
- âœ… è‡ªåŠ¨ä¿å­˜çš„èŠå¤©å†å²
- âœ… é€æ˜çš„è´¹ç”¨æ˜¾ç¤º
- âœ… å“åº”å¼çš„ç”¨æˆ·ç•Œé¢
- âœ… çº¯æ–‡æœ¬çš„AIå›å¤

**æŠ€æœ¯æ”¯æŒï¼š**
å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ‰€æœ‰é…ç½®æ˜¯å¦æ­£ç¡®å¡«å†™
2. CloudflareæœåŠ¡æ˜¯å¦æ­£å¸¸
3. GitHub Actionsæ˜¯å¦æˆåŠŸè¿è¡Œ
4. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ğŸš€
